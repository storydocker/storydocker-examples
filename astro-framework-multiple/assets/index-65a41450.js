import{a as Tt,c as gt}from"./_commonjsHelpers-de833af9.js";import{s as O}from"./index-d475d2ea.js";import{r as Pt}from"./index-da07a199.js";var U,J;function ht(){return J||(J=1,U=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},a=Symbol("test"),l=Object(a);if(typeof a=="string"||Object.prototype.toString.call(a)!=="[object Symbol]"||Object.prototype.toString.call(l)!=="[object Symbol]")return!1;var i=42;t[a]=i;for(a in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var p=Object.getOwnPropertySymbols(t);if(p.length!==1||p[0]!==a||!Object.prototype.propertyIsEnumerable.call(t,a))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var n=Object.getOwnPropertyDescriptor(t,a);if(n.value!==i||n.enumerable!==!0)return!1}return!0}),U}var X=typeof Symbol<"u"&&Symbol,Rt=ht(),It=function(){return typeof X!="function"||typeof Symbol!="function"||typeof X("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:Rt()},Q={foo:{}},wt=Object,jt=function(){return{__proto__:Q}.foo===Q.foo&&!({__proto__:null}instanceof wt)},Bt="Function.prototype.bind called on incompatible ",x=Array.prototype.slice,Ct=Object.prototype.toString,Nt="[object Function]",Ft=function(t){var a=this;if(typeof a!="function"||Ct.call(a)!==Nt)throw new TypeError(Bt+a);for(var l=x.call(arguments,1),i,p=function(){if(this instanceof i){var c=a.apply(this,l.concat(x.call(arguments)));return Object(c)===c?c:this}else return a.apply(t,l.concat(x.call(arguments)))},n=Math.max(0,a.length-l.length),o=[],e=0;e<n;e++)o.push("$"+e);if(i=Function("binder","return function ("+o.join(",")+"){ return binder.apply(this,arguments); }")(p),a.prototype){var y=function(){};y.prototype=a.prototype,i.prototype=new y,y.prototype=null}return i},Ut=Ft,z=Function.prototype.bind||Ut,xt=z,$t=xt.call(Function.call,Object.prototype.hasOwnProperty),g,j=SyntaxError,bt=Function,w=TypeError,$=function(r){try{return bt('"use strict"; return ('+r+").constructor;")()}catch{}},T=Object.getOwnPropertyDescriptor;if(T)try{T({},"")}catch{T=null}var D=function(){throw new w},Dt=T?function(){try{return arguments.callee,D}catch{try{return T(arguments,"callee").get}catch{return D}}}():D,R=It(),kt=jt(),v=Object.getPrototypeOf||(kt?function(r){return r.__proto__}:null),I={},Mt=typeof Uint8Array>"u"||!v?g:v(Uint8Array),P={"%AggregateError%":typeof AggregateError>"u"?g:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?g:ArrayBuffer,"%ArrayIteratorPrototype%":R&&v?v([][Symbol.iterator]()):g,"%AsyncFromSyncIteratorPrototype%":g,"%AsyncFunction%":I,"%AsyncGenerator%":I,"%AsyncGeneratorFunction%":I,"%AsyncIteratorPrototype%":I,"%Atomics%":typeof Atomics>"u"?g:Atomics,"%BigInt%":typeof BigInt>"u"?g:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?g:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?g:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?g:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?g:Float32Array,"%Float64Array%":typeof Float64Array>"u"?g:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?g:FinalizationRegistry,"%Function%":bt,"%GeneratorFunction%":I,"%Int8Array%":typeof Int8Array>"u"?g:Int8Array,"%Int16Array%":typeof Int16Array>"u"?g:Int16Array,"%Int32Array%":typeof Int32Array>"u"?g:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":R&&v?v(v([][Symbol.iterator]())):g,"%JSON%":typeof JSON=="object"?JSON:g,"%Map%":typeof Map>"u"?g:Map,"%MapIteratorPrototype%":typeof Map>"u"||!R||!v?g:v(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?g:Promise,"%Proxy%":typeof Proxy>"u"?g:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?g:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?g:Set,"%SetIteratorPrototype%":typeof Set>"u"||!R||!v?g:v(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?g:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":R&&v?v(""[Symbol.iterator]()):g,"%Symbol%":R?Symbol:g,"%SyntaxError%":j,"%ThrowTypeError%":Dt,"%TypedArray%":Mt,"%TypeError%":w,"%Uint8Array%":typeof Uint8Array>"u"?g:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?g:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?g:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?g:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?g:WeakMap,"%WeakRef%":typeof WeakRef>"u"?g:WeakRef,"%WeakSet%":typeof WeakSet>"u"?g:WeakSet};if(v)try{null.error}catch(r){var Gt=v(v(r));P["%Error.prototype%"]=Gt}var Lt=function r(t){var a;if(t==="%AsyncFunction%")a=$("async function () {}");else if(t==="%GeneratorFunction%")a=$("function* () {}");else if(t==="%AsyncGeneratorFunction%")a=$("async function* () {}");else if(t==="%AsyncGenerator%"){var l=r("%AsyncGeneratorFunction%");l&&(a=l.prototype)}else if(t==="%AsyncIteratorPrototype%"){var i=r("%AsyncGenerator%");i&&v&&(a=v(i.prototype))}return P[t]=a,a},Z={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},B=z,N=$t,qt=B.call(Function.call,Array.prototype.concat),Wt=B.call(Function.apply,Array.prototype.splice),tt=B.call(Function.call,String.prototype.replace),F=B.call(Function.call,String.prototype.slice),Yt=B.call(Function.call,RegExp.prototype.exec),Vt=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Kt=/\\(\\)?/g,zt=function(t){var a=F(t,0,1),l=F(t,-1);if(a==="%"&&l!=="%")throw new j("invalid intrinsic syntax, expected closing `%`");if(l==="%"&&a!=="%")throw new j("invalid intrinsic syntax, expected opening `%`");var i=[];return tt(t,Vt,function(p,n,o,e){i[i.length]=o?tt(e,Kt,"$1"):n||p}),i},Ht=function(t,a){var l=t,i;if(N(Z,l)&&(i=Z[l],l="%"+i[0]+"%"),N(P,l)){var p=P[l];if(p===I&&(p=Lt(l)),typeof p>"u"&&!a)throw new w("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:i,name:l,value:p}}throw new j("intrinsic "+t+" does not exist!")},H=function(t,a){if(typeof t!="string"||t.length===0)throw new w("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof a!="boolean")throw new w('"allowMissing" argument must be a boolean');if(Yt(/^%?[^%]*%?$/,t)===null)throw new j("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var l=zt(t),i=l.length>0?l[0]:"",p=Ht("%"+i+"%",a),n=p.name,o=p.value,e=!1,y=p.alias;y&&(i=y[0],Wt(l,qt([0,1],y)));for(var c=1,s=!0;c<l.length;c+=1){var f=l[c],u=F(f,0,1),m=F(f,-1);if((u==='"'||u==="'"||u==="`"||m==='"'||m==="'"||m==="`")&&u!==m)throw new j("property names with quotes must have matching quotes");if((f==="constructor"||!s)&&(e=!0),i+="."+f,n="%"+i+"%",N(P,n))o=P[n];else if(o!=null){if(!(f in o)){if(!a)throw new w("base intrinsic for "+t+" exists, but the property is not available.");return}if(T&&c+1>=l.length){var d=T(o,f);s=!!d,s&&"get"in d&&!("originalValue"in d.get)?o=d.get:o=o[f]}else s=N(o,f),o=o[f];s&&!e&&(P[n]=o)}}return o},mt={exports:{}};(function(r){var t=z,a=H,l=a("%Function.prototype.apply%"),i=a("%Function.prototype.call%"),p=a("%Reflect.apply%",!0)||t.call(i,l),n=a("%Object.getOwnPropertyDescriptor%",!0),o=a("%Object.defineProperty%",!0),e=a("%Math.max%");if(o)try{o({},"a",{value:1})}catch{o=null}r.exports=function(s){var f=p(t,i,arguments);if(n&&o){var u=n(f,"length");u.configurable&&o(f,"length",{value:1+e(0,s.length-(arguments.length-1))})}return f};var y=function(){return p(t,l,arguments)};o?o(r.exports,"apply",{value:y}):r.exports.apply=y})(mt);var St=mt.exports,At=H,vt=St,Jt=vt(At("String.prototype.indexOf")),_t=function(t,a){var l=At(t,!!a);return typeof l=="function"&&Jt(t,".prototype.")>-1?vt(l):l},k,et;function Ot(){if(et)return k;et=1;var r=ht();return k=function(){return r()&&!!Symbol.toStringTag},k}var M,rt;function me(){if(rt)return M;rt=1;var r=Ot()(),t=_t,a=t("Object.prototype.toString"),l=function(o){return r&&o&&typeof o=="object"&&Symbol.toStringTag in o?!1:a(o)==="[object Arguments]"},i=function(o){return l(o)?!0:o!==null&&typeof o=="object"&&typeof o.length=="number"&&o.length>=0&&a(o)!=="[object Array]"&&a(o.callee)==="[object Function]"},p=function(){return l(arguments)}();return l.isLegacyArguments=i,M=p?l:i,M}const Xt={},Qt=Object.freeze(Object.defineProperty({__proto__:null,default:Xt},Symbol.toStringTag,{value:"Module"})),Se=Tt(Qt);var G,nt;function Zt(){if(nt)return G;nt=1;var r=Function.prototype.toString,t=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,a,l;if(typeof t=="function"&&typeof Object.defineProperty=="function")try{a=Object.defineProperty({},"length",{get:function(){throw l}}),l={},t(function(){throw 42},null,a)}catch(A){A!==l&&(t=null)}else t=null;var i=/^\s*class\b/,p=function(b){try{var _=r.call(b);return i.test(_)}catch{return!1}},n=function(b){try{return p(b)?!1:(r.call(b),!0)}catch{return!1}},o=Object.prototype.toString,e="[object Object]",y="[object Function]",c="[object GeneratorFunction]",s="[object HTMLAllCollection]",f="[object HTML document.all class]",u="[object HTMLCollection]",m=typeof Symbol=="function"&&!!Symbol.toStringTag,d=!(0 in[,]),h=function(){return!1};if(typeof document=="object"){var S=document.all;o.call(S)===o.call(document.all)&&(h=function(b){if((d||!b)&&(typeof b>"u"||typeof b=="object"))try{var _=o.call(b);return(_===s||_===f||_===u||_===e)&&b("")==null}catch{}return!1})}return G=t?function(b){if(h(b))return!0;if(!b||typeof b!="function"&&typeof b!="object")return!1;try{t(b,null,a)}catch(_){if(_!==l)return!1}return!p(b)&&n(b)}:function(b){if(h(b))return!0;if(!b||typeof b!="function"&&typeof b!="object")return!1;if(m)return n(b);if(p(b))return!1;var _=o.call(b);return _!==y&&_!==c&&!/^\[object HTML/.test(_)?!1:n(b)},G}var L,ot;function te(){if(ot)return L;ot=1;var r=Zt(),t=Object.prototype.toString,a=Object.prototype.hasOwnProperty,l=function(e,y,c){for(var s=0,f=e.length;s<f;s++)a.call(e,s)&&(c==null?y(e[s],s,e):y.call(c,e[s],s,e))},i=function(e,y,c){for(var s=0,f=e.length;s<f;s++)c==null?y(e.charAt(s),s,e):y.call(c,e.charAt(s),s,e)},p=function(e,y,c){for(var s in e)a.call(e,s)&&(c==null?y(e[s],s,e):y.call(c,e[s],s,e))},n=function(e,y,c){if(!r(y))throw new TypeError("iterator must be a function");var s;arguments.length>=3&&(s=c),t.call(e)==="[object Array]"?l(e,y,s):typeof e=="string"?i(e,y,s):p(e,y,s)};return L=n,L}var q,at;function ee(){if(at)return q;at=1;var r=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],t=typeof globalThis>"u"?gt:globalThis;return q=function(){for(var l=[],i=0;i<r.length;i++)typeof t[r[i]]=="function"&&(l[l.length]=r[i]);return l},q}var W,it;function re(){if(it)return W;it=1;var r=H,t=r("%Object.getOwnPropertyDescriptor%",!0);if(t)try{t([],"length")}catch{t=null}return W=t,W}var Y,st;function ne(){if(st)return Y;st=1;var r=te(),t=ee(),a=St,l=_t,i=re(),p=l("Object.prototype.toString"),n=Ot()(),o=typeof globalThis>"u"?gt:globalThis,e=t(),y=l("String.prototype.slice"),c=Object.getPrototypeOf,s=l("Array.prototype.indexOf",!0)||function(h,S){for(var A=0;A<h.length;A+=1)if(h[A]===S)return A;return-1},f={__proto__:null};n&&i&&c?r(e,function(d){var h=new o[d];if(Symbol.toStringTag in h){var S=c(h),A=i(S,Symbol.toStringTag);if(!A){var b=c(S);A=i(b,Symbol.toStringTag)}f["$"+d]=a(A.get)}}):r(e,function(d){var h=new o[d];f["$"+d]=a(h.slice)});var u=function(h){var S=!1;return r(f,function(A,b){if(!S)try{"$"+A(h)===b&&(S=y(b,1))}catch{}}),S},m=function(h){var S=!1;return r(f,function(A,b){if(!S)try{A(h),S=y(b,1)}catch{}}),S};return Y=function(h){if(!h||typeof h!="object")return!1;if(!n){var S=y(p(h),8,-1);return s(e,S)>-1?S:S!=="Object"?!1:m(h)}return i?u(h):null},Y}var V,lt;function Ae(){if(lt)return V;lt=1;var r=ne();return V=function(a){return!!r(a)},V}const{addons:oe}=__STORYBOOK_MODULE_PREVIEW_API__,{once:ae,logger:ie}=__STORYBOOK_MODULE_CLIENT_LOGGER__,{FORCE_REMOUNT:ct,STORY_RENDER_PHASE_CHANGED:se,SET_CURRENT_STORY:le,IGNORED_EXCEPTION:ce}=__STORYBOOK_MODULE_CORE_EVENTS__;var ye=(r=>(r.DONE="done",r.ERROR="error",r.ACTIVE="active",r.WAITING="waiting",r))(ye||{}),E={CALL:"storybook/instrumenter/call",SYNC:"storybook/instrumenter/sync",START:"storybook/instrumenter/start",BACK:"storybook/instrumenter/back",GOTO:"storybook/instrumenter/goto",NEXT:"storybook/instrumenter/next",END:"storybook/instrumenter/end"},yt={start:!1,back:!1,goto:!1,next:!1,end:!1},pt=new Error("This function ran after the play function completed. Did you forget to `await` it?"),ft=r=>Object.prototype.toString.call(r)==="[object Object]",pe=r=>Object.prototype.toString.call(r)==="[object Module]",fe=r=>{if(!ft(r)&&!pe(r))return!1;if(r.constructor===void 0)return!0;let t=r.constructor.prototype;return!(!ft(t)||Object.prototype.hasOwnProperty.call(t,"isPrototypeOf")===!1)},ue=r=>{try{return new r.constructor}catch{return{}}},K=()=>({renderPhase:void 0,isDebugging:!1,isPlaying:!1,isLocked:!1,cursor:0,calls:[],shadowCalls:[],callRefsByResult:new Map,chainedCallIds:new Set,ancestors:[],playUntil:void 0,resolvers:{},syncTimeout:void 0}),ut=(r,t=!1)=>{let a=(t?r.shadowCalls:r.calls).filter(i=>i.retain);if(!a.length)return;let l=new Map(Array.from(r.callRefsByResult.entries()).filter(([,i])=>i.retain));return{cursor:a.length,calls:a,callRefsByResult:l}},de=class{constructor(){this.initialized=!1,this.channel=oe.getChannel(),this.state=O.window.parent.__STORYBOOK_ADDON_INTERACTIONS_INSTRUMENTER_STATE__||{};let r=({storyId:n,isPlaying:o=!0,isDebugging:e=!1})=>{let y=this.getState(n);this.setState(n,{...K(),...ut(y,e),shadowCalls:e?y.shadowCalls:[],chainedCallIds:e?y.chainedCallIds:new Set,playUntil:e?y.playUntil:void 0,isPlaying:o,isDebugging:e}),this.sync(n)};this.channel.on(ct,r),this.channel.on(se,({storyId:n,newPhase:o})=>{let{isDebugging:e}=this.getState(n);this.setState(n,{renderPhase:o}),o==="preparing"&&e&&r({storyId:n}),o==="playing"&&r({storyId:n,isDebugging:e}),o==="played"&&this.setState(n,{isLocked:!1,isPlaying:!1,isDebugging:!1}),o==="errored"&&this.setState(n,{isLocked:!1,isPlaying:!1})}),this.channel.on(le,()=>{this.initialized?this.cleanup():this.initialized=!0});let t=({storyId:n,playUntil:o})=>{this.getState(n).isDebugging||this.setState(n,({calls:y})=>({calls:[],shadowCalls:y.map(c=>({...c,status:"waiting"})),isDebugging:!0}));let e=this.getLog(n);this.setState(n,({shadowCalls:y})=>{var s;if(o||!e.length)return{playUntil:o};let c=y.findIndex(f=>f.id===e[0].callId);return{playUntil:(s=y.slice(0,c).filter(f=>f.interceptable&&!f.ancestors.length).slice(-1)[0])==null?void 0:s.id}}),this.channel.emit(ct,{storyId:n,isDebugging:!0})},a=({storyId:n})=>{var y;let o=this.getLog(n).filter(c=>!c.ancestors.length),e=o.reduceRight((c,s,f)=>c>=0||s.status==="waiting"?c:f,-1);t({storyId:n,playUntil:(y=o[e-1])==null?void 0:y.callId})},l=({storyId:n,callId:o})=>{var u;let{calls:e,shadowCalls:y,resolvers:c}=this.getState(n),s=e.find(({id:m})=>m===o),f=y.find(({id:m})=>m===o);if(!s&&f&&Object.values(c).length>0){let m=(u=this.getLog(n).find(d=>d.status==="waiting"))==null?void 0:u.callId;f.id!==m&&this.setState(n,{playUntil:f.id}),Object.values(c).forEach(d=>d())}else t({storyId:n,playUntil:o})},i=({storyId:n})=>{var e;let{resolvers:o}=this.getState(n);if(Object.values(o).length>0)Object.values(o).forEach(y=>y());else{let y=(e=this.getLog(n).find(c=>c.status==="waiting"))==null?void 0:e.callId;y?t({storyId:n,playUntil:y}):p({storyId:n})}},p=({storyId:n})=>{this.setState(n,{playUntil:void 0,isDebugging:!1}),Object.values(this.getState(n).resolvers).forEach(o=>o())};this.channel.on(E.START,t),this.channel.on(E.BACK,a),this.channel.on(E.GOTO,l),this.channel.on(E.NEXT,i),this.channel.on(E.END,p)}getState(r){return this.state[r]||K()}setState(r,t){let a=this.getState(r),l=typeof t=="function"?t(a):t;this.state={...this.state,[r]:{...a,...l}},O.window.parent.__STORYBOOK_ADDON_INTERACTIONS_INSTRUMENTER_STATE__=this.state}cleanup(){this.state=Object.entries(this.state).reduce((t,[a,l])=>{let i=ut(l);return i&&(t[a]=Object.assign(K(),i)),t},{});let r={controlStates:yt,logItems:[]};this.channel.emit(E.SYNC,r),O.window.parent.__STORYBOOK_ADDON_INTERACTIONS_INSTRUMENTER_STATE__=this.state}getLog(r){let{calls:t,shadowCalls:a}=this.getState(r),l=[...a];t.forEach((p,n)=>{l[n]=p});let i=new Set;return l.reduceRight((p,n)=>(n.args.forEach(o=>{o!=null&&o.__callId__&&i.add(o.__callId__)}),n.path.forEach(o=>{o.__callId__&&i.add(o.__callId__)}),(n.interceptable||n.exception)&&!i.has(n.id)&&(p.unshift({callId:n.id,status:n.status,ancestors:n.ancestors}),i.add(n.id)),p),[])}instrument(r,t){if(!fe(r))return r;let{mutate:a=!1,path:l=[]}=t;return Object.keys(r).reduce((i,p)=>{let n=r[p];return typeof n!="function"?(i[p]=this.instrument(n,{...t,path:l.concat(p)}),i):typeof n.__originalFn__=="function"?(i[p]=n,i):(i[p]=(...o)=>this.track(p,n,o,t),i[p].__originalFn__=n,Object.defineProperty(i[p],"name",{value:p,writable:!1}),Object.keys(n).length>0&&Object.assign(i[p],this.instrument({...n},{...t,path:l.concat(p)})),i)},a?r:ue(r))}track(r,t,a,l){var m,d,h,S;let i=((m=a==null?void 0:a[0])==null?void 0:m.__storyId__)||((S=(h=(d=O.__STORYBOOK_PREVIEW__)==null?void 0:d.selectionStore)==null?void 0:h.selection)==null?void 0:S.storyId),{cursor:p,ancestors:n}=this.getState(i);this.setState(i,{cursor:p+1});let o=`${n.slice(-1)[0]||i} [${p}] ${r}`,{path:e=[],intercept:y=!1,retain:c=!1}=l,s=typeof y=="function"?y(r,e):y,f={id:o,cursor:p,storyId:i,ancestors:n,path:e,method:r,args:a,interceptable:s,retain:c},u=(s&&!n.length?this.intercept:this.invoke).call(this,t,f,l);return this.instrument(u,{...l,mutate:!0,path:[{__callId__:f.id}]})}intercept(r,t,a){let{chainedCallIds:l,isDebugging:i,playUntil:p}=this.getState(t.storyId),n=l.has(t.id);return!i||n||p?(p===t.id&&this.setState(t.storyId,{playUntil:void 0}),this.invoke(r,t,a)):new Promise(o=>{this.setState(t.storyId,({resolvers:e})=>({isLocked:!1,resolvers:{...e,[t.id]:o}}))}).then(()=>(this.setState(t.storyId,o=>{let{[t.id]:e,...y}=o.resolvers;return{isLocked:!0,resolvers:y}}),this.invoke(r,t,a)))}invoke(r,t,a){let{callRefsByResult:l,renderPhase:i}=this.getState(t.storyId),p=e=>{var y,c;if(l.has(e))return l.get(e);if(e instanceof Array)return e.map(p);if(e instanceof Date)return{__date__:{value:e.toISOString()}};if(e instanceof Error){let{name:s,message:f,stack:u}=e;return{__error__:{name:s,message:f,stack:u}}}if(e instanceof RegExp){let{flags:s,source:f}=e;return{__regexp__:{flags:s,source:f}}}if(e instanceof O.window.HTMLElement){let{prefix:s,localName:f,id:u,classList:m,innerText:d}=e,h=Array.from(m);return{__element__:{prefix:s,localName:f,id:u,classNames:h,innerText:d}}}return typeof e=="function"?{__function__:{name:e.name}}:typeof e=="symbol"?{__symbol__:{description:e.description}}:typeof e=="object"&&((y=e==null?void 0:e.constructor)!=null&&y.name)&&((c=e==null?void 0:e.constructor)==null?void 0:c.name)!=="Object"?{__class__:{name:e.constructor.name}}:Object.prototype.toString.call(e)==="[object Object]"?Object.fromEntries(Object.entries(e).map(([s,f])=>[s,p(f)])):e},n={...t,args:t.args.map(p)};t.path.forEach(e=>{e!=null&&e.__callId__&&this.setState(t.storyId,({chainedCallIds:y})=>({chainedCallIds:new Set(Array.from(y).concat(e.__callId__))}))});let o=e=>{if(e instanceof Error){let{name:y,message:c,stack:s,callId:f=t.id}=e,u={name:y,message:c,stack:s,callId:f};if(this.update({...n,status:"error",exception:u}),this.setState(t.storyId,m=>({callRefsByResult:new Map([...Array.from(m.callRefsByResult.entries()),[e,{__callId__:t.id,retain:t.retain}]])})),t.ancestors.length)throw Object.prototype.hasOwnProperty.call(e,"callId")||Object.defineProperty(e,"callId",{value:t.id}),e;if(e!==pt)throw ie.warn(e),ce}throw e};try{if(i==="played"&&!t.retain)throw pt;let e=(a.getArgs?a.getArgs(t,this.getState(t.storyId)):t.args).map(c=>typeof c!="function"||Object.keys(c).length?c:(...s)=>{let{cursor:f,ancestors:u}=this.getState(t.storyId);this.setState(t.storyId,{cursor:0,ancestors:[...u,t.id]});let m=()=>this.setState(t.storyId,{cursor:f,ancestors:u}),d=!1;try{let h=c(...s);return h instanceof Promise?(d=!0,h.finally(m)):h}finally{d||m()}}),y=r(...e);return y&&["object","function","symbol"].includes(typeof y)&&this.setState(t.storyId,c=>({callRefsByResult:new Map([...Array.from(c.callRefsByResult.entries()),[y,{__callId__:t.id,retain:t.retain}]])})),this.update({...n,status:y instanceof Promise?"active":"done"}),y instanceof Promise?y.then(c=>(this.update({...n,status:"done"}),c),o):y}catch(e){return o(e)}}update(r){this.channel.emit(E.CALL,r),this.setState(r.storyId,({calls:t})=>{let a=t.concat(r).reduce((l,i)=>Object.assign(l,{[i.id]:i}),{});return{calls:Object.values(a).sort((l,i)=>l.id.localeCompare(i.id,void 0,{numeric:!0}))}}),this.sync(r.storyId)}sync(r){let t=()=>{var y;let{isLocked:a,isPlaying:l}=this.getState(r),i=this.getLog(r),p=(y=i.filter(({ancestors:c})=>!c.length).find(c=>c.status==="waiting"))==null?void 0:y.callId,n=i.some(c=>c.status==="active");if(a||n||i.length===0){let c={controlStates:yt,logItems:i};this.channel.emit(E.SYNC,c);return}let o=i.some(c=>c.status==="done"||c.status==="error"),e={controlStates:{start:o,back:o,goto:!0,next:l,end:l},logItems:i,pausedAt:p};this.channel.emit(E.SYNC,e)};this.setState(r,({syncTimeout:a})=>(clearTimeout(a),{syncTimeout:setTimeout(t,0)}))}};function ve(r,t={}){var a,l,i,p;try{let n=!1,o=!1;return(l=(a=O.window.location)==null?void 0:a.search)!=null&&l.includes("instrument=true")?n=!0:(p=(i=O.window.location)==null?void 0:i.search)!=null&&p.includes("instrument=false")&&(o=!0),O.window.parent===O.window&&!n||o?r:(O.window.__STORYBOOK_ADDON_INTERACTIONS_INSTRUMENTER__||(O.window.__STORYBOOK_ADDON_INTERACTIONS_INSTRUMENTER__=new de),O.window.__STORYBOOK_ADDON_INTERACTIONS_INSTRUMENTER__.instrument(r,t))}catch(n){return ae.warn(n),r}}var C={exports:{}};C.exports;var dt;function _e(){return dt||(dt=1,function(r){const t=(c,s)=>(...f)=>`\x1B[${c(...f)+s}m`,a=(c,s)=>(...f)=>{const u=c(...f);return`\x1B[${38+s};5;${u}m`},l=(c,s)=>(...f)=>{const u=c(...f);return`\x1B[${38+s};2;${u[0]};${u[1]};${u[2]}m`},i=c=>c,p=(c,s,f)=>[c,s,f],n=(c,s,f)=>{Object.defineProperty(c,s,{get:()=>{const u=f();return Object.defineProperty(c,s,{value:u,enumerable:!0,configurable:!0}),u},enumerable:!0,configurable:!0})};let o;const e=(c,s,f,u)=>{o===void 0&&(o=Pt());const m=u?10:0,d={};for(const[h,S]of Object.entries(o)){const A=h==="ansi16"?"ansi":h;h===s?d[A]=c(f,m):typeof S=="object"&&(d[A]=c(S[s],m))}return d};function y(){const c=new Map,s={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};s.color.gray=s.color.blackBright,s.bgColor.bgGray=s.bgColor.bgBlackBright,s.color.grey=s.color.blackBright,s.bgColor.bgGrey=s.bgColor.bgBlackBright;for(const[f,u]of Object.entries(s)){for(const[m,d]of Object.entries(u))s[m]={open:`\x1B[${d[0]}m`,close:`\x1B[${d[1]}m`},u[m]=s[m],c.set(d[0],d[1]);Object.defineProperty(s,f,{value:u,enumerable:!1})}return Object.defineProperty(s,"codes",{value:c,enumerable:!1}),s.color.close="\x1B[39m",s.bgColor.close="\x1B[49m",n(s.color,"ansi",()=>e(t,"ansi16",i,!1)),n(s.color,"ansi256",()=>e(a,"ansi256",i,!1)),n(s.color,"ansi16m",()=>e(l,"rgb",p,!1)),n(s.bgColor,"ansi",()=>e(t,"ansi16",i,!0)),n(s.bgColor,"ansi256",()=>e(a,"ansi256",i,!0)),n(s.bgColor,"ansi16m",()=>e(l,"rgb",p,!0)),s}Object.defineProperty(r,"exports",{enumerable:!0,get:y})}(C)),C.exports}export{Se as a,Ot as b,me as c,ne as d,Ae as e,ht as f,H as g,_t as h,ve as i,St as j,It as k,_e as r,$t as s};
//# sourceMappingURL=index-65a41450.js.map
